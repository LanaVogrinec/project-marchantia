# Main entrypoint of the workflow.
# Please follow the best practices:
# https://snakemake.readthedocs.io/en/stable/snakefiles/best_practices.html,
# in particular regarding the standardized folder structure mentioned there.

# conda activate tobamo-snakemake


configfile: "config/config.yaml"


rule all:
    input:
        expand("resources/SRA/{accession}", accession=config["SRRs"]),


rule download_SRA:
    output:
        fastq="resources/SRA/{accession}",
    log:
        "logs/resources/SRA/{accession}.download.log",
    conda:
        "envs/fasterq-dump.yaml"
    threads: workflow.cores
    shell:
        """
        ./workflow/scripts/download_sra.sh {output.fastq}
        """
